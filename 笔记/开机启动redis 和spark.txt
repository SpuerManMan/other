
vim /etv/init.d/redis
把下面代码添加到redis


PATH=/usr/local/bin:/sbin:/usr/bin:/bin
    
REDISPORT=6379 
EXEC=/usr/local/bin/redis-server
REDIS_CLI=/usr/local/bin/redis-cli
    
PIDFILE=/var/run/redis_6379.pid 
CONF="/usr/local/nbpt/redis.conf"
    
case "$1" in
  start) 
    if [ -f $PIDFILE ] 
    then
        echo "$PIDFILE exists, process is already running or crashed"
    else
        echo "Starting Redis server..."
        $EXEC $CONF &
    fi
    if [ "$?"="0" ]  
    then
       echo "Redis is running..."
    fi
    ;; 
  stop) 
    if [ ! -f $PIDFILE ] 
    then
        echo "$PIDFILE does not exist, process is not running"
    else
        PID=$(cat $PIDFILE) 
        echo "Stopping ..."
        $REDIS_CLI -p $REDISPORT SHUTDOWN 
        while [ -x ${PIDFILE} ] 
        do
          echo "Waiting for Redis to shutdown ..."
          sleep 1 
        done
        echo "Redis stopped"
    fi
    ;; 
  restart|force-reload) 
    ${0} stop 
    ${0} start 
    ;; 
 *) 
  echo "Usage: /etc/init.d/redis {start|stop|restart|force-reload}" >&2 
    exit 1 
esac 


chmod +x /etc/init.d/redis

需要修改redis.conf,将 daemonize no 改为 daemonize yes

添加redis服务：

chkconfig --add redis

设定开机启动服务

chkconfig redis on

启动,停止redis
service redis start  #或者 /etc/init.d/redis start 
service redis stop  #或者 /etc/init.d/redis stop 

spark开机启动

vim /etc/rc.local

/usr/local/nbpt/spark-2.1.0-bin-hadoop2.7/sbin/start_all.sh